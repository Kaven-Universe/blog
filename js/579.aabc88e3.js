(globalThis["webpackChunkkaven_blog"]=globalThis["webpackChunkkaven_blog"]||[]).push([[579],{22579:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>we});var t=i(22290),o=i(75232),l=i(49124),s=i.n(l);const n={class:"row no-wrap q-pa-md"},r={class:"column"},c={class:"text-h6 q-mb-md"},d={class:"column items-center"},u=["src"],m={class:"text-subtitle1 q-mt-md q-mb-xs"},g={class:"absolute-bottom bg-transparent"},p=["src"],w={class:"text-weight-bold"};function f(e,a,i,l,f,h){const k=(0,t.up)("q-separator"),b=(0,t.up)("q-btn"),_=(0,t.up)("q-space"),y=(0,t.up)("q-item-label"),v=(0,t.up)("q-item-section"),C=(0,t.up)("q-item"),W=(0,t.up)("q-list"),q=(0,t.up)("q-btn-dropdown"),A=(0,t.up)("q-avatar"),P=(0,t.up)("Login"),S=(0,t.up)("q-toolbar"),L=(0,t.up)("q-header"),Z=(0,t.up)("q-icon"),U=(0,t.up)("q-expansion-item"),V=(0,t.up)("q-scroll-area"),x=(0,t.up)("q-img"),Q=(0,t.up)("q-drawer"),$=(0,t.up)("router-view"),I=(0,t.up)("q-page-scroller"),D=(0,t.up)("q-page"),T=(0,t.up)("q-page-container"),G=(0,t.up)("q-layout"),z=(0,t.Q2)("close-popup"),j=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(G,{view:"lHh Lpr lff",class:"shadow-2 rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{elevated:"",class:"bg-cyan-8"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{class:"bg-grey-3 text-black"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{dark:"",vertical:"",inset:""}),e.store.IsAdmin?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Wm)(b,{flat:"",onClick:a[0]||(a[0]=a=>e.drawer=!e.drawer),round:"",dense:"",icon:"menu"}),e.IsPageActive(e.PageType.Home)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(b,{key:0,flat:"",round:"",dense:"",icon:"home",onClick:e.onGoHome},null,8,["onClick"])),e.IsPageActive(e.PageType.AdminDashboard)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(b,{key:1,flat:"",round:"",dense:"",icon:"dashboard",onClick:e.onGoAdmin},null,8,["onClick"])),(0,t.Wm)(b,{flat:"",round:"",dense:"",icon:"post_add",onClick:e.onCreateArticle},null,8,["onClick"])],64)):(0,t.kq)("",!0),(0,t.Wm)(_),(0,t.Wm)(q,{stretch:"",flat:"","auto-close":"",label:e.$t("Language")},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.store.langs,((a,i)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{clickable:"",key:`Lang${i}`,active:e.$i18n.locale===a,onClick:i=>e.onLanguageChanged(a)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t(a)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"])),[[z]]))),128))])),_:1})])),_:1},8,["label"]),e.store.IsLogged?((0,t.wg)(),(0,t.j4)(q,{key:1,stretch:"",flat:"",label:e.store.UserName,"auto-close":""},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",r,[(0,t._)("div",c,(0,o.zw)(e.$t("Settings")),1),(0,t.Wm)(b,{flat:"",color:"primary",label:e.$t("Profile"),onClick:e.onEditProfile},null,8,["label","onClick"])]),(0,t.Wm)(k,{vertical:"",inset:"",class:"q-mx-lg"}),(0,t._)("div",d,[(0,t.Wm)(A,{size:"72px",color:"blue-2"},{default:(0,t.w5)((()=>[(0,t._)("img",{src:e.store.UserAvatar},null,8,u)])),_:1}),(0,t._)("div",m,(0,o.zw)(e.store.UserName),1),(0,t.wy)((0,t.Wm)(b,{color:"primary",label:e.$t("Logout"),push:"",size:"sm",onClick:e.onLogout},null,8,["label","onClick"]),[[z]])])])])),_:1},8,["label"])):((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[(0,t.Wm)(k,{dark:"",vertical:""}),(0,t.Wm)(b,{stretch:"",flat:"",label:e.$t("Login"),onClick:a[1]||(a[1]=a=>e.store.showLoginDialog=!0)},null,8,["label"])],64)),(0,t.Wm)(P)])),_:1})])),_:1}),e.IsLogged?((0,t.wg)(),(0,t.j4)(Q,{key:0,modelValue:e.drawer,"onUpdate:modelValue":a[8]||(a[8]=a=>e.drawer=a),width:260,breakpoint:400},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{style:{height:"calc(100% - 150px)","margin-top":"150px","border-right":"1px solid #ddd"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{padding:""},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{active:e.IsPageActive(e.PageType.AdminDashboard),clickable:"",onClick:a[2]||(a[2]=a=>e.Go(e.PageType.AdminDashboard))},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:"dashboard"})])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Dashboard")),1)])),_:1})])),_:1},8,["active"])),[[j]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{active:e.IsPageActive(e.PageType.AdminArticles),clickable:"",onClick:a[3]||(a[3]=a=>e.Go(e.PageType.AdminArticles))},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:"menu_book"})])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Articles")),1)])),_:1})])),_:1},8,["active"])),[[j]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{active:e.IsPageActive(e.PageType.AdminUsers),clickable:"",onClick:a[4]||(a[4]=a=>e.Go(e.PageType.AdminUsers))},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:"supervised_user_circle"})])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Users")),1)])),_:1})])),_:1},8,["active"])),[[j]]),(0,t.Wm)(U,{"expand-separator":"",icon:"settings_applications",label:e.$t("Settings")},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{padding:"",class:"kaven-list-settings"},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{clickable:"",onClick:a[5]||(a[5]=a=>e.Go(e.PageType.AdminSettingsProfile)),active:e.IsPageActive(e.PageType.AdminSettingsProfile)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Profile")),1)])),_:1})])),_:1},8,["active"])),[[j]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{clickable:"",onClick:a[6]||(a[6]=a=>e.Go(e.PageType.AdminSettingsArticle)),active:e.IsPageActive(e.PageType.AdminSettingsArticle)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Article")),1)])),_:1}),(0,t.Wm)(y,{caption:""})])),_:1})])),_:1},8,["active"])),[[j]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(C,{clickable:"",onClick:a[7]||(a[7]=a=>e.Go(e.PageType.AdminSettingsOther)),active:e.IsPageActive(e.PageType.AdminSettingsOther)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{overline:""}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Other")),1)])),_:1})])),_:1})])),_:1},8,["active"])),[[j]])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,t.Wm)(x,{class:"absolute-top",src:s(),style:{height:"150px"}},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t.Wm)(A,{size:"56px",class:"q-mb-sm",color:"blue-2"},{default:(0,t.w5)((()=>[(0,t._)("img",{src:e.store.UserAvatar},null,8,p)])),_:1}),(0,t._)("div",w,(0,o.zw)(e.store.UserName),1),(0,t._)("div",null,(0,o.zw)(e.store.user.email),1)])])),_:1})])),_:1},8,["modelValue"])):(0,t.kq)("",!0),(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)($),(0,t.Wm)(I,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{fab:"",icon:"keyboard_arrow_up",color:"primary"})])),_:1})])),_:1})])),_:1})])),_:1})])}var h=i(43265),k=i(52368);const b=(0,t._)("img",{src:"/icons/favicon-128x128.png"},null,-1),_={class:"text-weight-bold"},y={class:"text-center q-pa-md q-gutter-md"},v={key:0,class:"text-grey-6"},C={href:"#"},W={key:1,class:"text-grey-6"},q={key:2,class:"text-grey-6"};function A(e,a,i,l,s,n){const r=(0,t.up)("q-avatar"),c=(0,t.up)("q-toolbar-title"),d=(0,t.up)("q-toolbar"),u=(0,t.up)("q-card-section"),m=(0,t.up)("q-btn"),g=(0,t.up)("q-icon"),p=(0,t.up)("q-input"),w=(0,t.up)("q-form"),f=(0,t.up)("q-card-actions"),h=(0,t.up)("router-link"),A=(0,t.up)("q-card"),P=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(P,{modelValue:e.showLoginDialog,"onUpdate:modelValue":a[7]||(a[7]=a=>e.showLoginDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{square:"",class:"shadow-24",style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"bg-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[b])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("span",_,(0,o.zw)(e.Title),1)])),_:1})])),_:1})])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{fab:"",icon:e.isSignUp?"remove":"add",color:"purple-4",onClick:a[0]||(a[0]=a=>e.isSignUp=!e.isSignUp),class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"}},null,8,["icon"]),(0,t.Wm)(w,{class:"q-px-sm q-pt-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{square:"",clearable:"",ref:"email",modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.email=a),type:"email",label:e.$t("Your Email"),rules:[e=>!!e||"Field is required",a=>e.IsEmailValid||"Invalid email"]},{prepend:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"email"})])),_:1},8,["modelValue","label","rules"]),e.isSignUp&&e.IsEmailValid?((0,t.wg)(),(0,t.j4)(p,{key:0,square:"",clearable:"",ref:"verificationCode",modelValue:e.verificationCode,"onUpdate:modelValue":a[2]||(a[2]=a=>e.verificationCode=a),type:"number",label:"Verification code",rules:[e=>!!e||"Field is required"]},{prepend:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"verified_user"})])),append:(0,t.w5)((()=>[(0,t.Wm)(m,{loading:e.isSendingVerificationCode,round:"",dense:"",flat:"",onClick:e.onSendVerificationCode,icon:"send"},null,8,["loading","onClick"])])),_:1},8,["modelValue","rules"])):(0,t.kq)("",!0),(0,t.Wm)(p,{square:"",clearable:"",ref:"password",modelValue:e.password,"onUpdate:modelValue":a[4]||(a[4]=a=>e.password=a),label:e.$t("Your Password"),rules:[e=>!!e||"Field is required"],type:e.isPasswordAsterisks?"password":"text",onKeyup:(0,k.D2)(e.onLogin,["enter"])},{prepend:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"lock"})])),append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:e.isPasswordAsterisks?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[3]||(a[3]=a=>e.isPasswordAsterisks=!e.isPasswordAsterisks)},null,8,["name"])])),_:1},8,["modelValue","label","rules","type","onKeyup"]),e.isSignUp?((0,t.wg)(),(0,t.j4)(p,{key:1,square:"",clearable:"",ref:"confirm",modelValue:e.confirm,"onUpdate:modelValue":a[6]||(a[6]=a=>e.confirm=a),label:e.$t("Confirm"),rules:[e=>!!e||"Field is required",a=>e.IsPasswordMatch||"Passwords do not match"],type:e.isConfirmPasswordAsterisks?"password":"text",onKeyup:(0,k.D2)(e.onLogin,["enter"])},{prepend:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"lock"})])),append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:e.isConfirmPasswordAsterisks?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[5]||(a[5]=a=>e.isConfirmPasswordAsterisks=!e.isConfirmPasswordAsterisks)},null,8,["name"])])),_:1},8,["modelValue","label","rules","type","onKeyup"])):(0,t.kq)("",!0)])),_:1})])),_:1}),e.isSignUp?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(u,{key:0},{default:(0,t.w5)((()=>[(0,t._)("div",y,[(0,t.Wm)(m,{round:"",color:"indigo-7",onClick:e.onGithub},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"fa-brands fa-github",size:"1.2rem"})])),_:1},8,["onClick"])])])),_:1})),(0,t.Wm)(f,{class:"q-px-lg"},{default:(0,t.w5)((()=>[e.isSignUp?((0,t.wg)(),(0,t.j4)(m,{key:1,unelevated:"",size:"lg",color:"purple-4",class:"full-width text-white",label:e.$t("Sign Up"),onClick:e.onSignup},null,8,["label","onClick"])):((0,t.wg)(),(0,t.j4)(m,{key:0,unelevated:"",size:"lg",color:"purple-4",class:"full-width text-white",label:e.$t("Login"),onClick:e.onLogin},null,8,["label","onClick"]))])),_:1}),(0,t.Wm)(u,{class:"text-center q-pa-sm"},{default:(0,t.w5)((()=>[e.isSignUp?((0,t.wg)(),(0,t.iD)("p",W,(0,o.zw)(e.$t("By clicking on Sign up, you agree to the")),1)):((0,t.wg)(),(0,t.iD)("p",v,[(0,t._)("a",C,(0,o.zw)(e.$t("Forgot your password?")),1)])),e.isSignUp?((0,t.wg)(),(0,t.iD)("p",q,[(0,t.Wm)(h,{to:{name:e.PageType.TermsAndConditionsOfUse,params:{language:e.$i18n.locale}},target:"_blank"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("Terms and Conditions of Use")),1)])),_:1},8,["to"])])):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])}var P=i(911),S=i(48123),L=i(5023),Z=i(37374);const U=(0,t.aZ)({name:"LoginDialog",data(){return{email:"",password:"",confirm:"",isPasswordAsterisks:!0,isConfirmPasswordAsterisks:!0,isSignUp:!1,verificationCode:"",isSendingVerificationCode:!1}},computed:{showLoginDialog:{get(){return this.store.showLoginDialog},set(e){this.store.showLoginDialog=e}},Title(){return this.isSignUp?this.$t("Sign Up"):this.$t("Login")},IsEmailValid(){return(0,P.x9)(this.email)},IsPasswordMatch(){return this.password===this.confirm}},methods:{async onLogin(){if(!this.Validate("email","password"))return;const e=await(0,L.L$)(this.email,this.password);e.Success?this.showLoginDialog=!1:console.error(e.Message),this.$q.notify({position:"top",message:e.Message,type:e.Success?"info":"warning",icon:e.Success?"check_circle":"error"})},onGithub(){const e="https://github.com/login/oauth/authorize?client_id=67af8b200e69ea08de89";S.Z.set(Z.yV.RedirectTo,location.href),open(e,"_self")},async onSendVerificationCode(){this.isSendingVerificationCode=!0;const e=await(0,L.HC)(this.email,Z.R4.SIGNUP);console.info(e),this.isSendingVerificationCode=!1},async onSignup(){if(!this.Validate("email","verificationCode","password","confirm"))return;const e=await(0,L.Ut)(this.email,this.password,this.confirm,this.verificationCode);e.Success&&(this.showLoginDialog=!1),this.$q.notify({position:"top",message:e.Message,type:e.Success?"info":"warning",icon:e.Success?"check_circle":"error"})},onCreateAccount(){console.warn("Not implemented")}},watch:{showLoginDialog(e){!0!==e&&(this.password="",this.confirm="",this.verificationCode="")}}});var V=i(60188),x=i(67738),Q=i(75267),$=i(24238),I=i(83239),D=i(95343),T=i(47785),G=i(4771),z=i(33944),j=i(51464),H=i(25652),E=i(88851),F=i(99535),M=i(8723),Y=i.n(M);const K=(0,V.Z)(U,[["render",A]]),N=K;Y()(U,"components",{QDialog:x.Z,QCard:Q.Z,QCardSection:$.Z,QToolbar:I.Z,QAvatar:D.Z,QToolbarTitle:T.Z,QBtn:G.Z,QForm:z.Z,QInput:j.Z,QIcon:H.Z,QCardActions:E.Z}),Y()(U,"directives",{ClosePopup:F.Z});const O=(0,t.aZ)({name:"MainLayout",components:{Login:N},data(){return{drawer:!1}},computed:{IsLogged(){return this.store.IsLogged}},methods:{async onGoHome(){await this.Go(h.GV.Home)},async onCreateArticle(){await this.Go(h.GV.AdminCreateArticle)},async onGoAdmin(){await this.Go(h.GV.AdminDashboard)},async onEditProfile(){await this.Go(h.GV.Profile)},onLanguageChanged(e){this.$i18n.locale=e,localStorage.setItem(h.je.Language,e)},onLogout(){this.store.Logout()}},watch:{IsLogged(e){console.info(`onLoginChanged: ${e}`),e||this.$route.name&&!(0,h.OS)(this.$route.name.toString())||this.Go(h.GV.Home).catch((e=>console.error(e)))}},mounted(){const e=localStorage.getItem(h.je.Language)??this.store.langs[0];this.$i18n.locale=e}});var B=i(1254),R=i(55868),J=i(16970),X=i(1068),ee=i(67283),ae=i(7561),ie=i(48043),te=i(62846),oe=i(44516),le=i(54426),se=i(7694),ne=i(52997),re=i(81918),ce=i(93533),de=i(99666),ue=i(96695),me=i(10819),ge=i(82668);const pe=(0,V.Z)(O,[["render",f]]),we=pe;Y()(O,"components",{QLayout:B.Z,QHeader:R.Z,QToolbar:I.Z,QSeparator:J.Z,QBtn:G.Z,QSpace:X.Z,QBtnDropdown:ee.Z,QList:ae.Z,QItem:ie.Z,QItemSection:te.Z,QItemLabel:oe.Z,QToggle:le.Z,QAvatar:D.Z,QDrawer:se.Z,QScrollArea:ne.Z,QIcon:H.Z,QExpansionItem:re.Z,QImg:ce.Z,QPageContainer:de.Z,QPage:ue.Z,QPageScroller:me.Z}),Y()(O,"directives",{ClosePopup:F.Z,Ripple:ge.Z})},49124:(e,a,i)=>{e.exports=i.p+"img/material.e248abda.png"}}]);